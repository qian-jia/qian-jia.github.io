<!DOCTYPE html><html lang="en" class="scroll-smooth"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><!-- <link rel="icon" type="image/svg+xml" href="/favicon.svg" /> --><link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><link rel="canonical" href="https://smale.codes/posts/setting-dates-via-git-hooks/"><meta name="generator" content="Astro v4.1.1"><!-- General Meta Tags --><title>How to use Git Hooks to set Created and Modified Dates</title><meta name="title" content="How to use Git Hooks to set Created and Modified Dates"><meta name="description" content="How to use Git Hooks to set your Created and Modified Dates on AstroPaper"><meta name="author" content="Simon Smale"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="How to use Git Hooks to set Created and Modified Dates"><meta property="og:description" content="How to use Git Hooks to set your Created and Modified Dates on AstroPaper"><meta property="og:url" content="https://smale.codes/posts/setting-dates-via-git-hooks/"><meta property="og:image" content="https://qian-jia.github.io/posts/how-to-use-git-hooks-to-set-created-and-modified-dates.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2024-01-03T20:40:08.000Z"><meta property="article:modified_time" content="2024-01-08T18:59:05.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://smale.codes/posts/setting-dates-via-git-hooks/"><meta property="twitter:title" content="How to use Git Hooks to set Created and Modified Dates"><meta property="twitter:description" content="How to use Git Hooks to set your Created and Modified Dates on AstroPaper"><meta property="twitter:image" content="https://qian-jia.github.io/posts/how-to-use-git-hooks-to-set-created-and-modified-dates.png"><!-- Google Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap" rel="stylesheet"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script src="/toggle-theme.js"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0LQFV6XC8X"></script><style>.breadcrumb:where(.astro-ilhxcym7){margin-left:auto;margin-right:auto;margin-bottom:.25rem;margin-top:2rem;width:100%;max-width:48rem;padding-left:1rem;padding-right:1rem}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7){display:inline}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7) a:where(.astro-ilhxcym7){text-transform:capitalize;opacity:.7}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7) span:where(.astro-ilhxcym7){opacity:.7}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7):not(:last-child) a:where(.astro-ilhxcym7):hover{opacity:1}
</style>
<link rel="stylesheet" href="/_astro/about.0xXqe534.css" />
<style>#main-content:where(.astro-hsp6otuf){margin-left:auto;margin-right:auto;width:100%;max-width:48rem;padding-left:1rem;padding-right:1rem;padding-bottom:1rem}#main-content:where(.astro-hsp6otuf) h1:where(.astro-hsp6otuf){font-size:1.5rem;line-height:2rem;font-weight:600}@media (min-width: 640px){#main-content:where(.astro-hsp6otuf) h1:where(.astro-hsp6otuf){font-size:1.875rem;line-height:2.25rem}}#main-content:where(.astro-hsp6otuf) p:where(.astro-hsp6otuf){margin-bottom:1.5rem;margin-top:.5rem;font-style:italic}
a:where(.astro-blwjyjpt){position:relative;text-decoration-line:underline;text-decoration-style:dashed}a:where(.astro-blwjyjpt):hover{top:-.125rem;--tw-text-opacity: 1;color:rgba(var(--color-accent),var(--tw-text-opacity))}a:where(.astro-blwjyjpt):focus-visible{padding:.25rem}a:where(.astro-blwjyjpt) svg:where(.astro-blwjyjpt){margin-right:-1.25rem;height:1.5rem;width:1.5rem;--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-text-opacity: 1;color:rgba(var(--color-text-base),var(--tw-text-opacity));opacity:.8}.group:where(.astro-blwjyjpt):hover a:where(.astro-blwjyjpt) svg:where(.astro-blwjyjpt){fill:rgb(var(--color-accent))}
@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
.pagination-wrapper:where(.astro-d776pwuy){margin-bottom:2rem;margin-top:auto;display:flex;justify-content:center}.disabled:where(.astro-d776pwuy){pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.5}.disabled:where(.astro-d776pwuy):hover{--tw-text-opacity: 1;color:rgba(var(--color-text-base),var(--tw-text-opacity))}.group:where(.astro-d776pwuy):hover .disabled:where(.astro-d776pwuy){fill:rgb(var(--color-text-base))}.group:where(.astro-d776pwuy):hover .disabled-svg:where(.astro-d776pwuy){fill:rgb(var(--color-text-base))!important}
main:where(.astro-vj4tpspi){margin-left:auto;margin-right:auto;width:100%;max-width:48rem;padding-left:1rem;padding-right:1rem;padding-bottom:3rem}.post-title:where(.astro-vj4tpspi){font-size:1.5rem;line-height:2rem;font-weight:600;--tw-text-opacity: 1;color:rgba(var(--color-accent),var(--tw-text-opacity))}
</style><script type="module" src="/_astro/hoisted.PYnCuTNO.js"></script><style>[data-astro-transition-scope="astro-plk3gbjq-1"] { view-transition-name: how-to-use-git-hooks-to-set-created-and-modified-dates; }@layer astro { ::view-transition-old(how-to-use-git-hooks-to-set-created-and-modified-dates) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(how-to-use-git-hooks-to-set-created-and-modified-dates) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(how-to-use-git-hooks-to-set-created-and-modified-dates) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(how-to-use-git-hooks-to-set-created-and-modified-dates) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-2"] { view-transition-name: docs; }@layer astro { ::view-transition-old(docs) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(docs) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(docs) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(docs) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-3"] { view-transition-name: faq; }@layer astro { ::view-transition-old(faq) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(faq) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(faq) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(faq) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body> <div class="wrapper pt-16 w-full max-w-3xl mx-auto">  <header class="astro-3ef6ksr2"> <a id="skip-to-content" href="#main-content" class="astro-3ef6ksr2">Skip to content</a> <div class="nav-container astro-3ef6ksr2"> <div class="top-nav-wrap astro-3ef6ksr2"> <a href="/" class="logo whitespace-nowrap astro-3ef6ksr2"> <img src="/assets/logo.svg" alt="Qian Jia" width="32" height="32" class="astro-3ef6ksr2"> </a> <nav id="nav-menu" class="astro-3ef6ksr2"> <button class="hamburger-menu focus-outline astro-3ef6ksr2" aria-label="Open Menu" aria-expanded="false" aria-controls="menu-items"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="menu-icon astro-3ef6ksr2"> <line x1="7" y1="12" x2="21" y2="12" class="line astro-3ef6ksr2"></line> <line x1="3" y1="6" x2="21" y2="6" class="line astro-3ef6ksr2"></line> <line x1="12" y1="18" x2="21" y2="18" class="line astro-3ef6ksr2"></line> <line x1="18" y1="6" x2="6" y2="18" class="close astro-3ef6ksr2"></line> <line x1="6" y1="6" x2="18" y2="18" class="close astro-3ef6ksr2"></line> </svg> </button> <ul id="menu-items" class="display-none sm:flex astro-3ef6ksr2"> <li class="astro-3ef6ksr2"> <a href="/posts" class=" astro-3ef6ksr2">
Posts
</a> </li> <li class="astro-3ef6ksr2"> <a href="/tags" class=" astro-3ef6ksr2">
Tags
</a> </li> <li class="astro-3ef6ksr2"> <a href="/about" class=" astro-3ef6ksr2">
About
</a> </li> <li class="astro-3ef6ksr2"> <a href="/search" class="group inline-block hover:text-skin-accent focus-outline p-3 sm:p-1  flex astro-3ef6ksr2" aria-label="search" title="Search"> <svg xmlns="http://www.w3.org/2000/svg" class="scale-125 sm:scale-100 astro-3ef6ksr2"><path d="M19.023 16.977a35.13 35.13 0 0 1-1.367-1.384c-.372-.378-.596-.653-.596-.653l-2.8-1.337A6.962 6.962 0 0 0 16 9c0-3.859-3.14-7-7-7S2 5.141 2 9s3.14 7 7 7c1.763 0 3.37-.66 4.603-1.739l1.337 2.8s.275.224.653.596c.387.363.896.854 1.384 1.367l1.358 1.392.604.646 2.121-2.121-.646-.604c-.379-.372-.885-.866-1.391-1.36zM9 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z" class="astro-3ef6ksr2"></path> </svg> <span class="sr-only astro-3ef6ksr2">Search</span> </a> </li> <li class="astro-3ef6ksr2"> <button id="theme-btn" class="focus-outline astro-3ef6ksr2" title="Toggles light & dark" aria-label="auto" aria-live="polite"> <svg xmlns="http://www.w3.org/2000/svg" id="moon-svg" class="astro-3ef6ksr2"> <path d="M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z" class="astro-3ef6ksr2"></path> </svg> <svg xmlns="http://www.w3.org/2000/svg" id="sun-svg" class="astro-3ef6ksr2"> <path d="M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z" class="astro-3ef6ksr2"></path> </svg> </button> </li> </ul> </nav> </div> </div> <!-- <Hr /> --> </header>   <div class="mx-auto flex w-full max-w-3xl justify-start px-2 astro-vj4tpspi"> <button class="focus-outline mb-2 mt-8 flex hover:opacity-75 astro-vj4tpspi" onclick="history.back()"> <svg xmlns="http://www.w3.org/2000/svg" class="astro-vj4tpspi"><path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" class="astro-vj4tpspi"></path> </svg><span class="astro-vj4tpspi">Go back</span> </button> </div> <main id="main-content" class="astro-vj4tpspi"> <h1 class="post-title astro-vj4tpspi" data-astro-transition-scope="astro-plk3gbjq-1">How to use Git Hooks to set Created and Modified Dates</h1> <div class="flex items-center space-x-2 opacity-80 my-2 astro-vj4tpspi"><svg xmlns="http://www.w3.org/2000/svg" class="scale-100 inline-block h-6 w-6 min-w-[1.375rem] fill-skin-base" aria-hidden="true"><path d="M7 11h2v2H7zm0 4h2v2H7zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"></path><path d="M5 22h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM19 8l.001 12H5V8h14z"></path></svg><span class="italic text-base">Updated:</span><span class="italic text-base"><time dateTime="2024-01-08T18:59:05.000Z">Jan 8, 2024</time><span aria-hidden="true"> | </span><span class="sr-only"> at </span><span class="text-nowrap">06:59 PM</span></span></div> <article id="article" role="article" class="prose mx-auto mt-8 max-w-3xl astro-vj4tpspi"> <p>In this post I will explain how to use the pre-commit Git hook to automate the input of the created (<code>pubDatetime</code>) and modified (<code>modDatetime</code>) in the AstroPaper blog theme frontmatter</p>
<h2 id="table-of-contents">Table of contents</h2>
<p></p><details><summary>Open Table of contents</summary><p></p>
<ul>
<li><a href="#have-them-everywhere">Have them Everywhere</a></li>
<li><a href="#the-hook">The Hook</a>
<ul>
<li><a href="#updating-the-modified-date-when-a-file-is-edited">Updating the modified date when a file is edited</a>
<ul>
<li><a href="#improvement---more-explicit">Improvement - More Explicit</a></li>
<li><a href="#note">NOTE</a></li>
</ul>
</li>
<li><a href="#adding-the-date-for-new-files">Adding the Date for new files</a>
<ul>
<li><a href="#improvement---only-loop-once">Improvement - Only Loop Once</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#populating-the-frontmatter">Populating the frontmatter</a></li>
<li><a href="#empty-moddatetime-changes">Empty <code>modDatetime</code> changes</a></li>
</ul>
<p></p></details><p></p>
<h2 id="have-them-everywhere">Have them Everywhere</h2>
<p><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">Git hooks</a> are great for automating tasks like <a href="https://gist.github.com/SSmale/3b380e5bbed3233159fb7031451726ea">adding</a> or <a href="https://itnext.io/using-git-hooks-to-enforce-branch-naming-policy-ffd81fa01e5e">checking</a> the branch name to your commit messages or <a href="https://gist.github.com/SSmale/367deee757a9b2e119d241e120249000">stopping you committing plain text secrets</a>. Their biggest flaw is that client-side hooks are per machine.</p>
<p>You can get around this by having a <code>hooks</code> directory and manually copy them to the <code>.git/hooks</code> directory or set up a symlink, but this all requires you to remember to set it up, and that is not something I am good at doing.</p>
<p>As this project uses npm, we are able to make use of a package called <a href="https://typicode.github.io/husky/">Husky</a> (this is already installed in AstroPaper) to automatically install the hooks for us.</p>
<h2 id="the-hook">The Hook</h2>
<p>As we want this hook to run as we commit the code to update the dates and then have that as part of our change we are going to use the <code>pre-commit</code> hook. This has already been set up by this AstroPaper project, but if it hadn’t, you would run <code>npx husky add .husky/pre-commit 'echo "This is our new pre-commit hook"'</code>.</p>
<p>Navigating to the <code>hooks/pre-commit</code> file, we are going to add one or both of the following snippets.</p>
<h3 id="updating-the-modified-date-when-a-file-is-edited">Updating the modified date when a file is edited</h3>
<hr>
<p>UPDATE:</p>
<p>This section has been updated with a new version of the hook that is smarter. It will now not increment the <code>modDatetime</code> until the post is published. On the first publish, set the draft status to <code>first</code> and watch the magic happen.</p>
<hr>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic"># Modified files, update the modDatetime</span></span>
<span class="line"><span style="color:#61AFEF">git</span><span style="color:#98C379"> diff</span><span style="color:#D19A66"> --cached</span><span style="color:#D19A66"> --name-status</span><span style="color:#ABB2BF"> |</span></span>
<span class="line"><span style="color:#61AFEF">grep</span><span style="color:#D19A66"> -i</span><span style="color:#98C379"> '^M.*\.md$'</span><span style="color:#ABB2BF"> |</span></span>
<span class="line"><span style="color:#C678DD">while</span><span style="color:#56B6C2"> read</span><span style="color:#98C379"> _</span><span style="color:#98C379"> file</span><span style="color:#ABB2BF">; </span><span style="color:#C678DD">do</span></span>
<span class="line"><span style="color:#E06C75">  filecontent</span><span style="color:#56B6C2">=</span><span style="color:#98C379">$(</span><span style="color:#61AFEF">cat</span><span style="color:#98C379"> "</span><span style="color:#E06C75">$file</span><span style="color:#98C379">")</span></span>
<span class="line"><span style="color:#E06C75">  frontmatter</span><span style="color:#56B6C2">=</span><span style="color:#98C379">$(</span><span style="color:#56B6C2">echo</span><span style="color:#98C379"> "</span><span style="color:#E06C75">$filecontent</span><span style="color:#98C379">" </span><span style="color:#ABB2BF">|</span><span style="color:#61AFEF"> awk</span><span style="color:#D19A66"> -v</span><span style="color:#98C379"> RS='---' 'NR==2{print}')</span></span>
<span class="line"><span style="color:#E06C75">  draft</span><span style="color:#56B6C2">=</span><span style="color:#98C379">$(</span><span style="color:#56B6C2">echo</span><span style="color:#98C379"> "</span><span style="color:#E06C75">$frontmatter</span><span style="color:#98C379">" </span><span style="color:#ABB2BF">|</span><span style="color:#61AFEF"> awk</span><span style="color:#98C379"> '/^draft: /{print $2}')</span></span>
<span class="line"><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> [ </span><span style="color:#98C379">"</span><span style="color:#E06C75">$draft</span><span style="color:#98C379">"</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "false"</span><span style="color:#ABB2BF"> ]; </span><span style="color:#C678DD">then</span></span>
<span class="line"><span style="color:#56B6C2">    echo</span><span style="color:#98C379"> "</span><span style="color:#E06C75">$file</span><span style="color:#98C379"> modDateTime updated"</span></span>
<span class="line"><span style="color:#61AFEF">    cat</span><span style="color:#E06C75"> $file</span><span style="color:#ABB2BF"> | </span><span style="color:#61AFEF">sed</span><span style="color:#98C379"> "/---.*/,/---.*/s/^modDatetime:.*$/modDatetime: $(</span><span style="color:#61AFEF">date</span><span style="color:#D19A66"> -u</span><span style="color:#98C379"> "+%Y-%m-%dT%H:%M:%SZ")/"</span><span style="color:#ABB2BF"> > </span><span style="color:#98C379">tmp</span></span>
<span class="line"><span style="color:#61AFEF">    mv</span><span style="color:#98C379"> tmp</span><span style="color:#E06C75"> $file</span></span>
<span class="line"><span style="color:#61AFEF">    git</span><span style="color:#98C379"> add</span><span style="color:#E06C75"> $file</span></span>
<span class="line"><span style="color:#C678DD">  fi</span></span>
<span class="line"><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> [ </span><span style="color:#98C379">"</span><span style="color:#E06C75">$draft</span><span style="color:#98C379">"</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "first"</span><span style="color:#ABB2BF"> ]; </span><span style="color:#C678DD">then</span></span>
<span class="line"><span style="color:#56B6C2">    echo</span><span style="color:#98C379"> "First release of </span><span style="color:#E06C75">$file</span><span style="color:#98C379">, draft set to false and modDateTime removed"</span></span>
<span class="line"><span style="color:#61AFEF">    cat</span><span style="color:#E06C75"> $file</span><span style="color:#ABB2BF"> | </span><span style="color:#61AFEF">sed</span><span style="color:#98C379"> "/---.*/,/---.*/s/^modDatetime:.*$/modDatetime:/"</span><span style="color:#ABB2BF"> | </span><span style="color:#61AFEF">sed</span><span style="color:#98C379"> "/---.*/,/---.*/s/^draft:.*$/draft: false/"</span><span style="color:#ABB2BF"> > </span><span style="color:#98C379">tmp</span></span>
<span class="line"><span style="color:#61AFEF">    mv</span><span style="color:#98C379"> tmp</span><span style="color:#E06C75"> $file</span></span>
<span class="line"><span style="color:#61AFEF">    git</span><span style="color:#98C379"> add</span><span style="color:#E06C75"> $file</span></span>
<span class="line"><span style="color:#C678DD">  fi</span></span>
<span class="line"><span style="color:#C678DD">done</span></span></code></pre>
<p><code>git diff --cached --name-status</code> gets the files from git that have been staged for committing. The output looks like:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#61AFEF">A</span><span style="color:#98C379">       src/content/blog/setting-dates-via-git-hooks.md</span></span></code></pre>
<p>The letter at the start denotes what action has been taken, in the above example the file has been added. Modified files have <code>M</code></p>
<p>We pipe that output into the grep command where we are looking at each line to find that have been modified. The line needs to start with <code>M</code> (<code>^(M)</code>), have any number of characters after that (<code>.*</code>) and end with the <code>.md</code> file extension (<code>.(md)$</code>).This is going to filter out the lines that are not modified markdown files <code>egrep -i "^(M).*\.(md)$"</code>.</p>
<hr>
<h4 id="improvement---more-explicit">Improvement - More Explicit</h4>
<p>This could be added to only look for files that we markdown files in the <code>blog</code> directory, as these are the only ones that will have the right frontmatter</p>
<hr>
<p>The regex will capture the two parts, the letter and the file path. We are going to pipe this list into a while loop to iterate over the matching lines and assign the letter to <code>a</code> and the path to <code>b</code>. We are going to ignore <code>a</code> for now.</p>
<p>To know the draft staus of the file, we need its frontmatter. In the following code we are using <code>cat</code> to get the content of the file, then using <code>awk</code> to split the file on the frontmatter separator (<code>---</code>) and taking the second block (the fonmtmatter, the bit between the <code>---</code>). From here we are using <code>awk</code> again to find the draft key and print is value.</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#E06C75">  filecontent</span><span style="color:#56B6C2">=</span><span style="color:#98C379">$(</span><span style="color:#61AFEF">cat</span><span style="color:#98C379"> "</span><span style="color:#E06C75">$file</span><span style="color:#98C379">")</span></span>
<span class="line"><span style="color:#E06C75">  frontmatter</span><span style="color:#56B6C2">=</span><span style="color:#98C379">$(</span><span style="color:#56B6C2">echo</span><span style="color:#98C379"> "</span><span style="color:#E06C75">$filecontent</span><span style="color:#98C379">" </span><span style="color:#ABB2BF">|</span><span style="color:#61AFEF"> awk</span><span style="color:#D19A66"> -v</span><span style="color:#98C379"> RS='---' 'NR==2{print}')</span></span>
<span class="line"><span style="color:#E06C75">  draft</span><span style="color:#56B6C2">=</span><span style="color:#98C379">$(</span><span style="color:#56B6C2">echo</span><span style="color:#98C379"> "</span><span style="color:#E06C75">$frontmatter</span><span style="color:#98C379">" </span><span style="color:#ABB2BF">|</span><span style="color:#61AFEF"> awk</span><span style="color:#98C379"> '/^draft: /{print $2}')</span></span></code></pre>
<p>Now we have the value for <code>draft</code> we are going to do 1 of 3 things, set the modDatetime to now (when draft is false <code>if [ "$draft" = "false" ]; then</code>), clear the modDatetime and set draft to false (when draft is set to first <code>if [ "$draft" = "first" ]; then</code>), or nothing (in any other case).</p>
<p>The next part with the sed command is a bit magical to me as I don’t often use it, it was copied from <a href="https://mademistakes.com/notes/adding-last-modified-timestamps-with-git/">another blog post on doing something similar</a>. In essence, it is looking inside the frontmatter tags (<code>---</code>) of the file to find the <code>pubDatetime:</code> key, getting the full line and replacing it with the <code>pubDatetime: $(date -u "+%Y-%m-%dT%H:%M:%SZ")/"</code> same key again and the current datetime formatted correctly.</p>
<p>This replacement is in the context of the whole file so we put that into a temporary file (<code>> tmp</code>), then we move (<code>mv</code>) the new file into the location of the old file, overwriting it. This is then added to git ready to be committed as if we made the change ourselves.</p>
<hr>
<h4 id="note">NOTE</h4>
<p>For the <code>sed</code> to work the frontmatter needs to already have the <code>modDatetime</code> key in the frontmatter. There are some other changes you will need to make for the app to build with a blank date, see <a href="#empty-moddatetime-changes">further down</a></p>
<hr>
<h3 id="adding-the-date-for-new-files">Adding the Date for new files</h3>
<p>Adding the date for a new file is the same process as above, but this time we are looking for lines that have been added (<code>A</code>) and we are going to replace the <code>pubDatetime</code> value.</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic"># New files, add/update the pubDatetime</span></span>
<span class="line"><span style="color:#61AFEF">git</span><span style="color:#98C379"> diff</span><span style="color:#D19A66"> --cached</span><span style="color:#D19A66"> --name-status</span><span style="color:#ABB2BF"> | </span><span style="color:#61AFEF">egrep</span><span style="color:#D19A66"> -i</span><span style="color:#98C379"> "^(A).*\.(md)$"</span><span style="color:#ABB2BF"> | </span><span style="color:#C678DD">while</span><span style="color:#56B6C2"> read</span><span style="color:#98C379"> a</span><span style="color:#98C379"> b</span><span style="color:#ABB2BF">; </span><span style="color:#C678DD">do</span></span>
<span class="line"><span style="color:#61AFEF">  cat</span><span style="color:#E06C75"> $b</span><span style="color:#ABB2BF"> | </span><span style="color:#61AFEF">sed</span><span style="color:#98C379"> "/---.*/,/---.*/s/^pubDatetime:.*$/pubDatetime: $(</span><span style="color:#61AFEF">date</span><span style="color:#D19A66"> -u</span><span style="color:#98C379"> "+%Y-%m-%dT%H:%M:%SZ")/"</span><span style="color:#ABB2BF"> > </span><span style="color:#98C379">tmp</span></span>
<span class="line"><span style="color:#61AFEF">  mv</span><span style="color:#98C379"> tmp</span><span style="color:#E06C75"> $b</span></span>
<span class="line"><span style="color:#61AFEF">  git</span><span style="color:#98C379"> add</span><span style="color:#E06C75"> $b</span></span>
<span class="line"><span style="color:#C678DD">done</span></span></code></pre>
<hr>
<h4 id="improvement---only-loop-once">Improvement - Only Loop Once</h4>
<p>We could use the <code>a</code> variable to switch inside the loop and either update the <code>modDatetime</code> or add the <code>pubDatetime</code> in one loop.</p>
<hr>
<h2 id="populating-the-frontmatter">Populating the frontmatter</h2>
<p>If your IDE supports snippets then there is the option to create a custom snippet to populate the frontmatter.<a href="https://github.com/satnaing/astro-paper/pull/206">In AstroPaper v4 will come with one for VSCode by default.</a></p>
<video autoplay muted controls plays-inline="true" class="border border-skin-line">
  <source src="https://github.com/satnaing/astro-paper/assets/17761689/e13babbc-2d78-405d-8758-ca31915e41b0" type="video/mp4">
</video>
<h2 id="empty-moddatetime-changes">Empty <code>modDatetime</code> changes</h2>
<p>To allow Astro to compile the markdown and do its thing, it needs to know what is expected in the frontmatter. It does this via the config in <code>src/content/config.ts</code></p>
<p>To allow the key to be there with no value we need to edit line 10 to add the <code>.nullable()</code> function.</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> blog</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> defineCollection</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">  type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"content"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#61AFEF">  schema</span><span style="color:#ABB2BF">: ({ </span><span style="color:#E06C75;font-style:italic">image</span><span style="color:#ABB2BF"> }) </span><span style="color:#C678DD">=></span></span>
<span class="line"><span style="color:#E5C07B">    z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">object</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">      author</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">string</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">default</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">SITE</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">author</span><span style="color:#ABB2BF">),</span></span>
<span class="line"><span style="color:#E06C75">      pubDatetime</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">date</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#ABB2BF">-     </span><span style="color:#E06C75">modDatetime</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">date</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">optional</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#ABB2BF">+     </span><span style="color:#E06C75">modDatetime</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">date</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">optional</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">nullable</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#E06C75">      title</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">string</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#E06C75">      featured</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">boolean</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">optional</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#E06C75">      draft</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">boolean</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">optional</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#E06C75">      tags</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">array</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">string</span><span style="color:#ABB2BF">()).</span><span style="color:#61AFEF">default</span><span style="color:#ABB2BF">([</span><span style="color:#98C379">"others"</span><span style="color:#ABB2BF">]),</span></span>
<span class="line"><span style="color:#E06C75">      ogImage</span><span style="color:#ABB2BF">: </span><span style="color:#61AFEF">image</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">refine</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">img</span><span style="color:#C678DD"> =></span><span style="color:#E5C07B"> img</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">width</span><span style="color:#56B6C2"> >=</span><span style="color:#D19A66"> 1200</span><span style="color:#56B6C2"> &#x26;&#x26;</span><span style="color:#E5C07B"> img</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">height</span><span style="color:#56B6C2"> >=</span><span style="color:#D19A66"> 630</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#E06C75">          message</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"OpenGraph image must be at least 1200 X 630 pixels!"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">        })</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">or</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">string</span><span style="color:#ABB2BF">())</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">optional</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#E06C75">      description</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">string</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#E06C75">      canonicalURL</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">string</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">optional</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#E06C75">      readingTime</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">z</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">string</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">optional</span><span style="color:#ABB2BF">(),</span></span>
<span class="line"><span style="color:#ABB2BF">    }),</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span></code></pre>
<p>To stop the IDE complaining in the blog engine files I have also done the following:</p>
<ol>
<li>added <code>| null</code> to line 15 in <code>src/layouts/Layout.astro</code> so that it looks like</li>
</ol>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#C678DD">export</span><span style="color:#C678DD"> interface</span><span style="color:#E5C07B"> Props</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">  title</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  author</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  description</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  ogImage</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  canonicalURL</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  pubDatetime</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">Date</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  modDatetime</span><span style="color:#C678DD">?</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">Date</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">null</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<!-- This needs to be 2 as it doesn't pick it up with the code block -->
<ol start="2">
<li>added <code>| null</code> to line 5 in <code>src/components/Datetime.tsx</code> so that it looks like</li>
</ol>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color:#C678DD">interface</span><span style="color:#E5C07B"> DatetimesProps</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">  pubDatetime</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">Date</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  modDatetime</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">Date</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">undefined</span><span style="color:#ABB2BF"> | </span><span style="color:#E5C07B">null</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre> </article> <ul class="my-8 astro-vj4tpspi"> <li class="inline-block my-1 underline-offset-4 astro-blwjyjpt"> <a href="/tags/docs" class="text-sm pr-2 group astro-blwjyjpt" data-astro-transition-scope="astro-36ssibgs-2"> <svg xmlns="http://www.w3.org/2000/svg" class=" scale-75 astro-blwjyjpt"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">docs</span> </a> </li> <li class="inline-block my-1 underline-offset-4 astro-blwjyjpt"> <a href="/tags/faq" class="text-sm pr-2 group astro-blwjyjpt" data-astro-transition-scope="astro-36ssibgs-3"> <svg xmlns="http://www.w3.org/2000/svg" class=" scale-75 astro-blwjyjpt"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">faq</span> </a> </li>  </ul> <!--
    <div
      class="flex flex-col-reverse items-center justify-between gap-6 sm:flex-row-reverse sm:items-end sm:gap-4"
    >
      <button
        id="back-to-top"
        class="focus-outline whitespace-nowrap py-1 hover:opacity-75"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="rotate-90">
          <path
            d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z"
          ></path>
        </svg>
        <span>Back to Top</span>
      </button>

      <ShareLinks />
    </div>
--> <section class="giscus mx-auto mt-10 w-full"></section> <script src="https://giscus.app/client.js" data-repo="qian-jia/qian-jia.github.io" data-repo-id="R_kgDOLH5NfA" data-category="Blog Comments" data-category-id="DIC_kwDOLH5NfM4Ccnv7" data-mapping="url" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="transparent_dark" data-lang="en" data-loading="lazy" crossorigin="anonymous" async>
</script> </main> <footer class="mt-auto astro-sz7xmlte"> <div class="max-w-3xl mx-auto px-0"> <hr class="border-skin-line" aria-hidden="true"> </div> <div class="footer-wrapper astro-sz7xmlte"> <div class="social-icons flex astro-upu6fzxr">  </div>  <div class="copyright-wrapper astro-sz7xmlte"> <span class="astro-sz7xmlte">Copyright &#169; 2024</span> <span class="separator astro-sz7xmlte">&nbsp;|&nbsp;</span> <span class="astro-sz7xmlte">All rights reserved.</span> </div> </div> </footer>   </div> </body></html>  <script>
  /** Attaches links to headings in the document,
   *  allowing sharing of sections easily */
  function addHeadingLinks() {
    let headings = Array.from(document.querySelectorAll("h2, h3, h4, h5, h6"));
    for (let heading of headings) {
      heading.classList.add("group")
      let link = document.createElement("a");
      link.innerText = "#";
      link.className = "heading-link hidden group-hover:inline-block ml-2";
      link.href = "#" + heading.id;
      link.ariaHidden = true;
      heading.appendChild(link);
    }
  }
  addHeadingLinks();

  /** Attaches copy buttons to code blocks in the document,
   * allowing users to copy code easily. */
  function attachCopyButtons() {
    let copyButtonLabel = "Copy";
    let codeBlocks = Array.from(document.querySelectorAll("pre"));

    for (let codeBlock of codeBlocks) {
      let wrapper = document.createElement("div");
      wrapper.style.position = "relative";

      let copyButton = document.createElement("button");
      copyButton.className =
        "copy-code absolute right-3 -top-3 rounded bg-skin-card px-2 py-1 text-xs leading-4 text-skin-base font-medium";
      copyButton.innerHTML = copyButtonLabel;
      codeBlock.setAttribute("tabindex", "0");
      codeBlock.appendChild(copyButton);

      // wrap codebock with relative parent element
      codeBlock.parentNode.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);

      copyButton.addEventListener("click", async () => {
        await copyCode(codeBlock, copyButton);
      });
    }

    async function copyCode(block, button) {
      let code = block.querySelector("code");
      let text = code.innerText;

      await navigator.clipboard.writeText(text);

      // visual feedback that task is completed
      button.innerText = "Copied";

      setTimeout(() => {
        button.innerText = copyButtonLabel;
      }, 700);
    }
  }
  attachCopyButtons();
  document.addEventListener("astro:after-swap", attachCopyButtons);

  /** Scrolls the document to the top when
   * the "Back to Top" button is clicked. */
  function backToTop() {
    document.querySelector("#back-to-top")?.addEventListener("click", () => {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });
  }
  backToTop();
  document.addEventListener("astro:after-swap", backToTop);
</script>